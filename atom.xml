<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>BaoNQ | Chjkaro Blog | Just wanna write something</title>
  <icon>https://blog.baonq.xyz/favicon.png</icon>
  <subtitle>BaoNQのBlog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.baonq.xyz/"/>
  <updated>2020-04-16T09:03:00.000Z</updated>
  <id>https://blog.baonq.xyz/</id>
  
  <author>
    <name>QuocBao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>NAT64</title>
    <link href="https://blog.baonq.xyz/en/posts/d71b1019/"/>
    <id>https://blog.baonq.xyz/en/posts/d71b1019/</id>
    <published>2019-08-05T14:24:01.000Z</published>
    <updated>2020-04-16T09:03:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-Cau-hinh-NAT64"><a href="#1-Cau-hinh-NAT64" class="headerlink" title="1. Cấu hình NAT64"></a>1. Cấu hình NAT64</h2><h2 id="1-1-Config-network"><a href="#1-1-Config-network" class="headerlink" title="1.1. Config network"></a>1.1. Config network</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/network/interfaces</span><br></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto ens33</span><br><span class="line">iface ens38 inet6 static</span><br><span class="line"><span class="keyword">pre</span>-<span class="keyword">up</span> modprobe ipv6</span><br><span class="line">address <span class="number">2001</span>:db8:<span class="number">0</span>:<span class="number">1</span>::<span class="number">129</span></span><br><span class="line">netmask <span class="number">64</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart networking</span><br></pre></td></tr></table></figure><h2 id="1-2-Config-Sysctl"><a href="#1-2-Config-Sysctl" class="headerlink" title="1.2. Config Sysctl"></a>1.2. Config Sysctl</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/#net.ipv4.ip_forward=1/net.ipv4.ip_forward=1/&#x27;</span> /etc/sysctl.<span class="keyword">conf</span></span><br><span class="line">sed -i <span class="string">&#x27;s/#net.ipv6.conf.all.forwarding=1/net.ipv6.conf.all.forwarding=1/&#x27;</span></span><br></pre></td></tr></table></figure><p>Or config on <code>/etc/sysctl.conf</code></p><h2 id="1-3-install-tayga"><a href="#1-3-install-tayga" class="headerlink" title="1.3. install tayga"></a>1.3. install tayga</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install tayga -y</span><br><span class="line">mkdir -p /var/db/tayga</span><br><span class="line">vi /etc/tayga.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tun-device nat64</span><br><span class="line">ipv4-addr 192.168.255.1</span><br><span class="line">prefix 2001:db8:1:ffff::&#x2F;96</span><br><span class="line">dynamic-pool 192.168.255.0&#x2F;24</span><br><span class="line">data-dir &#x2F;var&#x2F;db&#x2F;tayga</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/RUN=&quot;no&quot;/RUN=&quot;yes&quot;/&#x27;</span> /etc/default/tayga</span><br></pre></td></tr></table></figure><h2 id="1-4-Install-radvd"><a href="#1-4-Install-radvd" class="headerlink" title="1.4. Install radvd"></a>1.4. Install radvd</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install radvd -y</span><br><span class="line">vi /etc/radvd.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface ens33 &#123;</span><br><span class="line">        AdvManagedFlag off;</span><br><span class="line">        AdvOtherConfigFlag on;</span><br><span class="line">        AdvSendAdvert on;</span><br><span class="line">        MinRtrAdvInterval 3;</span><br><span class="line">        MaxRtrAdvInterval 10;</span><br><span class="line">        prefix 2001:db8:0:1::&#x2F;64 &#123;</span><br><span class="line">                AdvOnLink on;</span><br><span class="line">                AdvAutonomous on;</span><br><span class="line">                AdvRouterAddr on;</span><br><span class="line">        &#125;;</span><br><span class="line">        RDNSS 2001:db8:0:1::129 &#123; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="1-5-Install-bind9"><a href="#1-5-Install-bind9" class="headerlink" title="1.5. Install bind9"></a>1.5. Install bind9</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install bind9</span><br><span class="line">vi /etc/<span class="built_in">bind</span>/named.conf.options</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">options &#123;</span><br><span class="line">        directory &quot;/var/cache/bind&quot;;</span><br><span class="line">        dnssec-validation auto;</span><br><span class="line">        forwarders &#123;</span><br><span class="line">                45.124.93.62;</span><br><span class="line">                8.8.8.8;</span><br><span class="line">                208.67.220.220;</span><br><span class="line">        &#125;;</span><br><span class="line">        auth-nxdomain no;</span><br><span class="line">        listen-on-v6 &#123; any; &#125;;</span><br><span class="line">        allow-query &#123; any; &#125;;</span><br><span class="line">        dns64 2001:db8:1:ffff::/96 &#123;</span><br><span class="line">                clients &#123; any;&#125;;</span><br><span class="line">              exclude &#123; ::/0; &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="1-6-Install-dhcp6"><a href="#1-6-Install-dhcp6" class="headerlink" title="1.6. Install dhcp6"></a>1.6. Install dhcp6</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install isc-dhcp-server -y</span><br><span class="line">vi /etc/dhcp/dhcpd6.conf</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">default-lease-time 600;</span><br><span class="line">max-lease-time 7200;</span><br><span class="line">log-facility local7;</span><br><span class="line">subnet6 2001:db8:0:1::/64 &#123;</span><br><span class="line">        range6 2001:db8:0:1::130 2001:db8:0:1::250;</span><br><span class="line">        range6 2001:db8:0:1::/64 temporary;</span><br><span class="line">        option dhcp6.name-servers 2001:db8:0:1::129;</span><br><span class="line">        # Prefix range for delegation to sub-routers</span><br><span class="line">        # prefix6 2001:db8:0:100:: 2001:db8:0:f00:: /56;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/INTERFACES=&quot;&quot;/INTERFACES=&quot;ens33&quot;/&#x27;</span> /etc/default/isc-dhcp-server</span><br></pre></td></tr></table></figure><h2 id="1-7-Reboot"><a href="#1-7-Reboot" class="headerlink" title="1.7. Reboot"></a>1.7. Reboot</h2>]]></content>
    
    <summary type="html">
    
      Sử dụng NAT64 để triển khai IPV6
    
    </summary>
    
    
      <category term="Linux" scheme="https://blog.baonq.xyz/categories/Linux/"/>
    
    
      <category term="NAT64" scheme="https://blog.baonq.xyz/tags/NAT64/"/>
    
  </entry>
  
</feed>
